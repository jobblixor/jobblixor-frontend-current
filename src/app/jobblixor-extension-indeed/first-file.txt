// Wait for the details panel, as you already do
const detailsPanel = document.querySelector('.jobsearch-RightPane');
let easyApplyUrl = null;

// Look for an anchor wrapping the Apply Now button
const applyBtn = detailsPanel.querySelector('.jobsearch-IndeedApplyButton button');
if (applyBtn) {
    const parentAnchor = applyBtn.closest('a[href]');
    if (parentAnchor) {
        easyApplyUrl = parentAnchor.href;
    }
}

// Fallback: any <a> in panel with 'applystart' (Indeed's Smart Apply)
if (!easyApplyUrl) {
    const altAnchor = detailsPanel.querySelector('a[href*="applystart"]');
    if (altAnchor) {
        easyApplyUrl = altAnchor.href;
    }
}

// Optional: Check data-href on button (rare but possible)
if (!easyApplyUrl && applyBtn && applyBtn.dataset.href) {
    easyApplyUrl = applyBtn.dataset.href;
}
